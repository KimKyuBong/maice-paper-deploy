# 논문 그림 캡션 (3장 시스템 설계)

논문에 삽입할 그림과 캡션 목록입니다. LaTeX 또는 Word에서 복사하여 사용하세요.

---

## 그림 3.1 질문 처리 파이프라인

**파일**: `figure3-1-pipeline.svg` (또는 `.png`)

**캡션**:

```
그림 3.1 MAICE 시스템의 질문 처리 파이프라인

학생의 질문은 Classifier Agent를 거쳐 answerable(바로 답변 가능), needs_clarify(명료화 필요), 
unanswerable(답변 불가)의 3단계로 분류된다. needs_clarify 판정을 받은 질문은 Question 
Improvement Agent가 Dewey의 반성적 사고 5단계에 기반한 명료화 대화를 진행하며, 충분한 정보가 
확보되면 Answer Generator Agent가 맞춤형 답변을 생성한다. 모든 대화는 Observer Agent가 관찰하여 
교사 대시보드로 전송된다.
```

**LaTeX 코드**:
```latex
\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.85\textwidth]{figures/figure3-1-pipeline.svg}
    \caption{MAICE 시스템의 질문 처리 파이프라인}
    \label{fig:pipeline}
\end{figure}
```

---

## 그림 3.2 3계층 시스템 아키텍처

**파일**: `figure3-2-architecture.svg` (또는 `.png`)

**캡션**:

```
그림 3.2 MAICE 시스템의 3계층 아키텍처

MAICE는 계층 1(대화 인터페이스), 계층 2(관리 시스템), 계층 3(에이전트 시스템)의 3계층으로 
구성된다. 계층 1은 학생이 직접 사용하는 채팅 화면으로, MathLive 기반 수식 입력과 실시간 답변 
표시를 제공한다. 계층 2는 FastAPI 기반 대화 관리 서버와 PostgreSQL 데이터베이스로 모든 대화를 
저장하고 교사 대시보드를 제공한다. 계층 3은 5개의 AI 에이전트(Classifier, Question Improvement, 
Answer Generator, Observer, FreeTalker)가 Redis Streams와 Pub/Sub을 통해 협업하여 지능적인 
질문 처리를 수행한다.
```

**LaTeX 코드**:
```latex
\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.9\textwidth]{figures/figure3-2-architecture.svg}
    \caption{MAICE 시스템의 3계층 아키텍처}
    \label{fig:architecture}
\end{figure}
```

---

## 그림 3.3 질문 처리 시퀀스

**파일**: `figure3-3-sequence.svg` (또는 `.png`)

**캡션**:

```
그림 3.3 학생 질문의 실시간 처리 시퀀스

학생이 "수열 알려줘"와 같은 모호한 질문을 입력하면, Classifier Agent가 needs_clarify로 
판정하고 Question Improvement Agent가 명료화 질문("어떤 부분이 궁금한가요?")을 생성한다. 
학생이 "수열 공식들"로 응답하면 충분한 정보가 확보되었다고 판단하여 Answer Generator Agent가 
K1 유형(사실적 지식) 답변을 생성한다. 모든 메시지는 관리 시스템을 거쳐 실시간 스트리밍 방식으로 
대화 화면에 표시된다.
```

**LaTeX 코드**:
```latex
\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.85\textwidth]{figures/figure3-3-sequence.svg}
    \caption{학생 질문의 실시간 처리 시퀀스}
    \label{fig:sequence}
\end{figure}
```

---

## 그림 3.4 3단계 게이팅 시스템

**파일**: `figure3-4-gating.svg` (또는 `.png`)

**캡션**:

```
그림 3.4 Classifier Agent의 3단계 게이팅 판정

Classifier Agent는 학생 질문을 분석하여 answerable(녹색), needs_clarify(노란색), 
unanswerable(빨간색)의 3단계로 판정한다. answerable은 질문이 명확하고 답변 생성이 가능한 경우로 
즉시 Answer Generator로 전달되며, needs_clarify는 질문이 모호하거나 맥락 정보가 부족한 경우로 
Question Improvement Agent를 통한 명료화 과정을 거친다. unanswerable은 수학 외 영역이거나 
교육적으로 부적절한 질문으로 정중한 안내 메시지를 제공한다.
```

**LaTeX 코드**:
```latex
\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.7\textwidth]{figures/figure3-4-gating.svg}
    \caption{Classifier Agent의 3단계 게이팅 판정}
    \label{fig:gating}
\end{figure}
```

---

## 그림 3.5 명료화 프로세스

**파일**: `figure3-5-clarification.svg` (또는 `.png`)

**캡션**:

```
그림 3.5 Question Improvement Agent의 명료화 완료 판단 프로세스

Classifier로부터 needs_clarify 판정을 받은 질문은 최대 3회의 명료화 과정을 거친다. 
각 명료화 질문 후 학생 응답을 LLM 기반으로 평가하여 PASS(충분한 정보 확보) 또는 
NEED_MORE(추가 정보 필요)로 판정한다. PASS 판정 시 즉시 최종 질문을 생성하여 
Answer Generator로 전달하며, NEED_MORE인 경우 다음 명료화 질문을 제시한다. 
3회 시도 후에도 충분한 정보가 확보되지 않으면 현재 정보로 답변을 생성한다.
```

**LaTeX 코드**:
```latex
\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.75\textwidth]{figures/figure3-5-clarification.svg}
    \caption{Question Improvement Agent의 명료화 완료 판단 프로세스}
    \label{fig:clarification}
\end{figure}
```

---

## 그림 3.6 이미지 OCR 수식 변환 시스템

**파일**: `figure3-6-ocr.svg` (또는 `.png`)

**캡션**:

```
그림 3.6 Gemini Vision API 기반 이미지 OCR 수식 변환 시스템

학생이 패드나 종이에 작성한 수식을 사진 촬영하여 업로드하면, 프론트엔드에서 파일 형식과 크기를 
검증한 후 백엔드 ImageToLatexService로 전송한다. 백엔드는 이미지를 전처리(RGB 변환, 리사이즈)한 후 
Gemini 2.5 Flash Vision API를 호출하여 수식을 인식한다. API가 반환한 LaTeX 문자열을 정제하고 
MathLive 호환 형식으로 변환하여 프론트엔드로 전송하면, 프론트엔드는 커서 위치에 편집 가능한 
LaTeX 텍스트로 삽입하고 실시간 렌더링하여 학생에게 표시한다. 이 방식은 일반 LLM의 이미지 직접 
전달과 달리 편집 가능한 텍스트로 변환하여 오인식 수정이 용이하다는 차별점이 있다.
```

**LaTeX 코드**:
```latex
\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.85\textwidth]{figures/figure3-6-ocr.svg}
    \caption{Gemini Vision API 기반 이미지 OCR 수식 변환 시스템}
    \label{fig:ocr}
\end{figure}
```

---

## 📝 사용 가이드

### LaTeX에서 그림 참조하기

본문에서 그림을 참조할 때:

```latex
그림~\ref{fig:pipeline}에서 보듯이, MAICE 시스템은 ...
```

### Word에서 그림 번호 자동화

1. 그림 삽입 후 우클릭 → **캡션 삽입**
2. 레이블: "그림" 선택
3. 번호 매기기 자동 설정
4. 본문에서 **상호 참조** 기능으로 그림 번호 삽입

### 그림 배치 권장사항

- 그림은 해당 내용이 처음 언급된 단락 직후에 배치
- 큰 그림(전체 너비)은 별도 페이지에 배치
- 작은 그림은 본문 옆에 배치 가능
- 모든 그림은 본문에서 최소 1회 이상 참조

---

**작성일**: 2025년 11월  
**버전**: 1.0












