# 명료화 프롬프트 개선안

## 📊 개선 배경

### 기존 설문 결과
- ✅ **긍정**: "명료화 과정이 최종 정답보다 더 큰 배움" (4.4점)
- ❌ **문제**: "시간 과다 소요" (3.1점), "기능 복잡" (2.9점)
- ❌ **요구**: "용도 설명 필요", "처음엔 막막함"

### 핵심 개선 방향
1. **교육적 의도 명시**: 학생이 "왜 명료화하는지" 이해
2. **단계별 전략**: 효율성과 교육성 균형
3. **메타인지 프레이밍**: 명료화 = 생각하는 법 훈련

---

## ✨ 개선안 1: 명료화 의도 명시

### AS-IS (현재)
```
"어떤 부분이 더 궁금하신가요? 😊"
```

### TO-BE (개선)
```
레벨별 프레이밍:

Level 1 (간단한 의도 설명):
"질문을 조금만 더 구체적으로 만들어주면, 
 딱 필요한 설명을 해드릴 수 있어요!
 어떤 부분이 궁금하신가요? 😊"

Level 2 (교육적 의도 포함):
"함께 질문을 구체화해볼까요? 🎯
 네가 정확히 무엇을 모르는지 찾아가는 과정이
 진짜 학습의 시작이에요!
 
 [구체적 질문] 중 어느 것이 궁금한가요?"

Level 3 (메타인지 훈련 강조):
"좋은 질문은 좋은 답변을 만들어요! 💡
 스스로 생각해보는 연습을 해볼까요?
 
 [열린 질문으로 생각 유도]"
```

---

## 🎯 개선안 2: 3단계 명료화 전략

### 단계별 접근 프레임워크

```yaml
Stage 1: Quick Scope (빠른 범위 확인)
  목적: 시간 효율성, 학생 좌절 방지
  대상: 매우 모호한 질문
  방식: 2-3개 구체적 선택지 제시
  
  예시:
    학생: "수열 알려줘"
    
    AI: "수열에 대해 알고 싶구나! 😊
         어떤 부분이 궁금한지 알려줄래?
         
         1️⃣ 수열이 뭔지 (정의)
         2️⃣ 수열 공식들
         3️⃣ 수열 문제 푸는 방법
         
         이 중에 어떤 게 궁금해?"

Stage 2: Specific Clarify (구체적 명료화)
  목적: 정확한 의도 파악
  대상: 약간 구체적인 질문
  방식: 선택한 범위 내 세부 확인
  
  예시:
    학생: "수열 공식이요"
    
    AI: "수열 공식 중에서도 여러 가지가 있어!
         
         • 등차수열 공식
         • 등비수열 공식
         • 수열의 합 공식
         
         어느 것을 배우고 싶어? 😊"

Stage 3: Deep Understanding (깊은 이해)
  목적: 메타인지 훈련, 진짜 이해도 파악
  대상: 거의 명확한 질문
  방식: 열린 질문으로 사고 유도
  
  예시:
    학생: "등차수열 공식이요"
    
    AI: "등차수열 공식에 대해 알고 싶구나! 🎯
         
         혹시 어떤 부분이 어렵거나 궁금한 건지
         말해줄 수 있어?
         
         (예: 공식이 왜 저렇게 생겼는지,
          공식을 어떻게 사용하는지 등)"
```

---

## 🧠 개선안 3: 메타인지 프레이밍

### 명료화 = 메타인지 훈련 프레임

```yaml
기존_방식:
  question_only: "어떤 부분이 궁금하신가요?"

개선_방식:
  question_with_frame:
    opening: "함께 생각해보자! 🤔"
    question: "어떤 부분이 궁금한가요?"
    educational_note: "(네가 뭘 모르는지 아는 게 학습의 시작이야!)"

출력_형태:
  "함께 생각해보자! 🤔
   
   수열 공식 중에서 어느 것을 배우고 싶어?
   • 등차수열 공식
   • 등비수열 공식
   
   (정확히 무엇을 모르는지 아는 것부터가
    스스로 공부하는 능력을 키워줘! 💡)"
```

### 메타인지 요소 포함 가이드

```yaml
항상_포함:
  - "함께 생각해보자"
  - "네가 정확히 무엇을 모르는지"
  
선택적_포함:
  - "(이 과정이 진짜 학습이에요)"
  - "스스로 생각하는 연습"
  - "좋은 질문은 좋은 답변을 만들어요"
  
절대_금지:
  - 너무 길고 교훈적인 설명
  - 학생을 가르치려는 톤
  - "너는 모르니까 내가 알려줄게" 식
```

---

## ⚡ 개선안 4: 상황별 전략 선택

### 질문 모호도에 따른 전략 매트릭스

| 질문 모호도 | 전략 | 프레이밍 레벨 | 예시 |
|-----------|------|-------------|------|
| **매우 모호** | Stage 1 | Level 1 | "수학", "이차함수" |
| **약간 모호** | Stage 2 | Level 2 | "이차함수 공식" |
| **약간 구체적** | Stage 3 | Level 2 | "이차함수 꼭짓점 공식" |
| **거의 명확** | answerable | - | "이차함수 꼭짓점 공식 유도 과정" |
| **맥락 있음** | 최소 명료화 | Level 1 | "그거" (이전 대화 참조) |

### 효율성 최적화 규칙

```yaml
과도한_명료화_방지:
  규칙: "answerable에 가까우면 바로 답변"
  이유: "명료화의 피로감 최소화"
  
  예시:
    학생: "이차함수의 꼭짓점을 구하는 완전제곱식 변형 방법"
    판단: answerable ← 충분히 구체적
    행동: 바로 답변 (추가 명료화 X)

맥락_활용_우선:
  규칙: "이전 대화 참조 가능하면 활용"
  이유: "대화 흐름 유지, 학생 피로 방지"
  
  예시:
    MAICE: "등비수열 공식을 배워볼까?"
    학생: "응, 그거!"
    판단: answerable ← 맥락상 명확
    행동: 바로 답변 (명료화 불필요)

단계_건너뛰기:
  규칙: "상황에 따라 Stage 1→3 가능"
  이유: "유연한 대응"
  
  예시:
    학생: "함수"
    AI: Stage 1 건너뛰고 Stage 2로
         "함수의 정의/그래프/성질 중 어느 것?"
```

---

## 📋 개선된 프롬프트 (초안)

### 시스템 프롬프트 추가 섹션

```yaml
## 명료화 전략 (개선된 버전)

### 1. 교육적 의도 명시
모든 명료화 질문은 다음 중 하나의 프레이밍을 포함하세요:

Level 1 (간단):
"질문을 조금만 더 구체적으로 만들어주면, 딱 필요한 설명을 해드릴게요!"

Level 2 (교육적):
"함께 질문을 구체화해볼까요? 🎯 네가 정확히 무엇을 모르는지 찾아가는 과정이 진짜 학습의 시작이에요!"

Level 3 (메타인지):
"좋은 질문은 좋은 답변을 만들어요! 💡 스스로 생각해보는 연습을 해볼까요?"

### 2. 3단계 명료화 전략

Stage 1 - Quick Scope (매우 모호한 질문):
  • 2-3개 구체적 선택지 제시
  • Level 1 프레이밍 사용
  • 효율성 우선
  
  예시:
  "수열에 대해 알고 싶구나! 😊
   어떤 부분이 궁금한지 알려줄래?
   
   1️⃣ 수열이 뭔지 (정의)
   2️⃣ 수열 공식들
   3️⃣ 수열 문제 푸는 방법"

Stage 2 - Specific Clarify (약간 모호한 질문):
  • 선택한 범위 내 세부 확인
  • Level 2 프레이밍 사용
  • 교육성과 효율성 균형
  
  예시:
  "함께 구체화해볼까요? 🎯
   
   수열 공식 중에서도:
   • 등차수열 공식
   • 등비수열 공식
   
   어느 것을 배우고 싶어?"

Stage 3 - Deep Understanding (약간 구체적):
  • 열린 질문으로 사고 유도
  • Level 3 프레이밍 사용 (선택적)
  • 메타인지 훈련
  
  예시:
  "등차수열 공식 중에서
   어떤 부분이 어렵거나 궁금해?
   
   (정확히 무엇을 모르는지 아는 것부터가
    스스로 공부하는 능력을 키워줘! 💡)"

### 3. 전략 선택 규칙

질문_모호도_평가:
  - 매우 모호 (단어 1-2개): Stage 1
  - 약간 모호 (주제+범위): Stage 2
  - 약간 구체적 (세부사항 일부): Stage 3 or answerable
  - 맥락 있음 (이전 대화): 최소 명료화 or answerable

효율성_최적화:
  - answerable에 가까우면 바로 답변
  - 맥락 활용 가능하면 우선 활용
  - 과도한 명료화 방지

메타인지_균형:
  - 너무 교훈적이지 않게
  - 자연스러운 대화 톤 유지
  - 학생 피로 최소화

### 4. 출력 예시

매우 모호한 질문:
```json
{
  "clarification_questions": [
    "이차함수에 대해 알고 싶구나! 😊\n질문을 조금만 더 구체적으로 만들어주면, 딱 필요한 설명을 해드릴게요!\n\n어떤 부분이 궁금해?\n1️⃣ 이차함수가 뭔지 (정의)\n2️⃣ 이차함수 그래프\n3️⃣ 이차함수 공식들\n4️⃣ 이차함수 문제 푸는 방법"
  ],
  "clarification_reasoning": "질문이 '이차함수'로만 되어 있어 범위가 매우 넓습니다. Stage 1 전략으로 4가지 주요 영역을 선택지로 제시하여 빠르게 범위를 좁히도록 유도합니다. Level 1 프레이밍으로 명료화의 목적을 간단히 설명하여 학생의 협조를 구합니다."
}
```

약간 모호한 질문:
```json
{
  "clarification_questions": [
    "함께 질문을 구체화해볼까요? 🎯\n\n이차함수 공식 중에서도:\n• 표준형 공식 (y = ax² + bx + c)\n• 꼭짓점 공식 (y = a(x-p)² + q)\n• 인수분해 공식 (y = a(x-α)(x-β))\n\n어느 것을 배우고 싶어?"
  ],
  "clarification_reasoning": "'이차함수 공식'이라는 범위가 주어졌으나, 여러 형태의 공식이 있어 구체화가 필요합니다. Stage 2 전략으로 3가지 주요 공식 형태를 제시하여 정확한 학습 목표를 파악합니다. Level 2 프레이밍으로 명료화의 교육적 의도를 전달합니다."
}
```

약간 구체적 (메타인지 훈련):
```json
{
  "clarification_questions": [
    "이차함수의 꼭짓점 공식에 대해 알고 싶구나!\n\n혹시 어떤 부분이 어렵거나 궁금한지 말해줄 수 있어?\n(예: 공식 유도 과정, 공식 사용법, 왜 그런 형태인지 등)\n\n(정확히 무엇을 모르는지 아는 것부터가 스스로 공부하는 능력을 키워줘! 💡)"
  ],
  "clarification_reasoning": "이미 '꼭짓점 공식'이라고 구체적으로 명시했으나, 공식의 어떤 측면(유도/사용/이해)을 원하는지 불명확합니다. Stage 3 전략으로 열린 질문을 통해 진짜 이해도와 학습 목표를 파악하며, 동시에 메타인지 훈련 요소를 포함하여 스스로 생각하는 능력을 키웁니다."
}
```

---

## 🎯 기대 효과

### 1. 시간 효율성 개선
```
기존: 모든 질문에 일괄적 명료화 → 시간 소요
개선: 단계별 전략 → 빠른 질문은 빠르게, 깊은 질문은 깊게
```

### 2. 학생 이해도 향상
```
기존: "왜 이걸 묻지?" → 방어적 태도
개선: "아, 나를 도와주려는 거구나" → 협조적 태도
```

### 3. 메타인지 능력 강화
```
기존: 우연히 배우는 메타인지
개선: 의도적인 메타인지 훈련 프레임
```

### 4. 만족도 향상
```
기존: "복잡해" (2.9점)
예상: "이제 뭘 물어야 할지 알겠어" (4.0점 이상)
```

---

## 📝 A/B 테스트 검증 계획

이번 실험에서 다음을 검증:

### 가설 2 (메타인지) 재검증
```yaml
H2-1: 개선된 명료화 프롬프트가 기존보다 메타인지 향상도가 더 높을 것

측정:
  - 질문 품질 점수 변화 속도
  - "명료화 과정의 도움" 점수 (기존 4.4 → 목표 4.7)
  - 질문 구체화 능력 향상도 (Q26)
```

### 효율성 개선 검증
```yaml
H-new: 개선된 명료화가 시간 효율성을 저해하지 않을 것

측정:
  - 명료화 1회당 소요 시간
  - 명료화 횟수 (과도한 명료화 방지)
  - "시간 소요" 점수 (기존 3.1 → 목표 3.8)
```

---

## 🚀 다음 단계

1. **프롬프트 통합**: `config.yaml`에 개선안 적용
2. **파일럿 테스트**: 5-10명으로 검증
3. **A/B 테스트**: 기존 vs 개선 프롬프트 비교
4. **지속 개선**: 피드백 반영하여 반복 개선

---

이 개선안은 기존 설문 결과의 문제점을 해결하면서도,
명료화의 핵심 가치인 "메타인지 훈련"을 강화합니다.

