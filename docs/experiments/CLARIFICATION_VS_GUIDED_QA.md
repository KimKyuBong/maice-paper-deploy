# 명료화 vs 문답과정: 2단계 학습 지원 시스템

## 🎯 핵심 개념 구분

### 명료화 (Clarification Phase)
**목적**: "학생이 **무엇을** 물어보는지" 파악
**시점**: 질문이 모호할 때
**결과**: 명확한 질문 확정

### 문답과정 (Guided Q&A Phase)
**목적**: "학생에게 **어떻게** 답변할지" 선택
**시점**: 질문이 명확해진 후 (answerable)
**결과**: 단계별 안내 또는 전체 답변

---

## 🔄 2단계 프로세스

### Phase 1: 명료화 (Clarification)
```
학생: "수열 알려줘" ← 모호함

AI (명료화):
  "수열에 대해 알고 싶구나! 😊
   어떤 부분이 궁금해?
   1️⃣ 수열 정의
   2️⃣ 수열 공식
   3️⃣ 수열 문제 풀이"

학생: "공식이요"

AI (2차 명료화):
  "수열 공식 중에서:
   • 등차수열 공식
   • 등비수열 공식
   어느 것?"

학생: "등차수열이요"

→ 질문 확정: "등차수열 공식"
```

### Phase 2: 문답과정 (Guided Q&A)
```
질문 확정됨: "등차수열 공식"
knowledge_code: K3 (절차적 지식)

AI (문답과정 선택지 제공):
  "등차수열 공식에 대해 알려줄게! 📚
   
   어떻게 배우고 싶어?
   
   1️⃣ 단계별로 차근차근 배우기
      (공식이 왜 그런지부터 시작해서 함께 알아가는 방식)
   
   2️⃣ 전체 내용 한번에 보기
      (공식, 유도과정, 예시를 한번에 설명)
   
   어떤 방식이 좋을까? 😊"

학생 선택:
  Option 1 선택 → Guided Q&A 진행
  Option 2 선택 → Full Answer 제공
```

---

## 📊 Knowledge Code별 문답과정 적용

### K1 (즉답형) - 문답과정 불필요
```yaml
특성: 사실적 지식, 정의, 공식 값
전략: 바로 답변 제공

예시:
  질문: "등차수열의 정의가 뭐야?"
  답변: [바로 정의 제공]
  
이유: 단계적 안내가 불필요한 간단한 지식
```

### K2 (설명형) - 문답과정 선택적
```yaml
특성: 개념 간 관계, 비교, 원리
전략: 학생 선택권 제공

예시:
  질문: "등차수열과 등비수열의 차이가 뭐야?"
  
  선택지:
    1️⃣ 단계별: 먼저 등차수열 특징 → 등비수열 특징 → 비교
    2️⃣ 전체: 차이점을 표로 정리해서 한번에
```

### K3 (적용형) - 문답과정 권장 ⭐
```yaml
특성: 절차, 방법, 알고리즘
전략: 문답과정 강력 권장 (but 선택권은 학생)

예시:
  질문: "등차수열 일반항 공식 유도 과정"
  
  AI:
    "등차수열 일반항 공식을 유도하는 과정을 알려줄게!
     
     어떻게 배우고 싶어?
     
     1️⃣ 단계별로 함께 생각해보기 (추천! 💡)
        Q: 첫째항이 a, 공차가 d일 때 둘째항은?
        → 학생 답변
        Q: 그럼 셋째항은?
        → 학생 답변
        Q: 패턴이 보여? n번째 항은?
        → 함께 도출
     
     2️⃣ 전체 과정 한번에 보기
        [전체 유도 과정 제공]
     
     어떤 방식이 좋을까?"
```

### K4 (문제해결형) - 문답과정 필수 ⭐⭐
```yaml
특성: 전략, 사고 과정, 메타인지
전략: 문답과정 필수 (단, 학생이 거부하면 요약 제공)

예시:
  질문: "이 문제를 어떻게 접근해야 할지 모르겠어"
  
  AI:
    "함께 문제를 풀어나가보자! 🤔
     
     어떤 방식으로 도움받고 싶어?
     
     1️⃣ 함께 생각하며 풀기 (강력 추천! 💪)
        - 내가 질문하고 너가 생각해보는 방식
        - 스스로 답을 찾아가는 연습
        - 진짜 실력이 늘어!
     
     2️⃣ 풀이 전략만 알려주기
        - 어떤 순서로 접근하면 되는지 설명
        - 너가 직접 풀어보기
     
     3️⃣ 전체 풀이 보기
        - 처음부터 끝까지 상세한 풀이
     
     어떤 방식이 좋을까?"
```

---

## 🎓 문답과정 (Guided Q&A) 상세 설계

### 소크라테스식 문답 전략

```yaml
Level 1: 관찰 및 분석
  Q: "먼저 이 문제에서 주어진 정보가 뭐야?"
  학생 답변 → 피드백
  
Level 2: 패턴 인식
  Q: "여기서 어떤 패턴이나 규칙이 보여?"
  학생 답변 → 피드백
  
Level 3: 전략 수립
  Q: "그럼 이걸 어떻게 활용할 수 있을까?"
  학생 답변 → 피드백
  
Level 4: 적용 및 해결
  Q: "좋아! 그럼 직접 해볼래?"
  학생 답변 → 최종 피드백
```

### 문답과정 중 학생 지원

```yaml
학생이_막힐_때:
  - "어려운가봐! 힌트를 줄까? 😊"
  - "이렇게 생각해보면 어때: [힌트]"
  - "아니면 전체 설명을 들어볼래?"

학생이_정답_말할_때:
  - "정확해! 🎉 어떻게 그렇게 생각했어?"
  - "맞아! 이해한 것 같은데, 한번 설명해볼래?"

학생이_오답_말할_때:
  - "음, 조금 다른데... [구체적 피드백]"
  - "거의 다 왔어! [어떤 부분이] 다시 생각해볼래?"

학생이_포기하려_할_때:
  - "괜찮아! 어려울 수 있어. 내가 설명해줄까?"
  - "[선택지 다시 제공]"
```

---

## 📋 시스템 흐름도

### 완전한 프로세스

```
┌─────────────────────────────┐
│ 학생 질문 입력              │
└──────────┬──────────────────┘
           │
           ▼
    ┌─────────────┐
    │ 질문 분류   │
    │ (K1~K4)     │
    └──────┬──────┘
           │
           ▼
    ┌─────────────┐
    │ 품질 평가   │
    └──────┬──────┘
           │
      ┌────┴────┐
      │         │
answerable   needs_clarify
      │         │
      │         ▼
      │    ┌─────────────────┐
      │    │ Phase 1:        │
      │    │ 명료화 진행     │
      │    │ (Stage 1/2/3)   │
      │    └────────┬────────┘
      │             │
      │             ▼
      │        질문 확정
      │             │
      └─────────┬───┘
                │
                ▼
         ┌─────────────┐
         │ Knowledge   │
         │ Code 확인   │
         └──────┬──────┘
                │
         ┌──────┴──────┐
         │             │
      K1/K2         K3/K4
         │             │
         ▼             ▼
    ┌─────────┐  ┌──────────────┐
    │ 바로    │  │ Phase 2:     │
    │ 답변    │  │ 문답과정     │
    │ 제공    │  │ 선택지 제공  │
    └─────────┘  └──────┬───────┘
                        │
                 ┌──────┴──────┐
                 │             │
            단계별 안내     전체 답변
                 │             │
                 ▼             ▼
          ┌─────────┐   ┌──────────┐
          │ Guided  │   │ Full     │
          │ Q&A     │   │ Answer   │
          └─────────┘   └──────────┘
```

---

## 💡 실전 예시

### 예시 1: K3 (절차적 지식) - 공식 유도

#### Phase 1: 명료화
```
학생: "등차수열 공식"

AI: "등차수열 공식 중에서:
     • 일반항 공식
     • 합 공식
     어느 것이 궁금해?"

학생: "일반항이요"

→ 질문 확정: "등차수열 일반항 공식"
   knowledge_code: K3
```

#### Phase 2: 문답과정 선택
```
AI: "등차수열 일반항 공식을 알려줄게! 📚
     
     어떻게 배우고 싶어?
     
     1️⃣ 단계별로 함께 생각해보기 (추천! 💡)
        공식이 어떻게 만들어지는지 함께 알아가면서
        진짜 이해하는 방식이야!
     
     2️⃣ 공식과 설명 한번에 보기
        공식, 유도과정, 예시를 바로 설명해줄게
     
     어떤 방식이 좋을까? 😊
     (언제든 바꿀 수 있어!)"

학생: "1번이요"
```

#### Guided Q&A 진행
```
AI: "좋아! 함께 생각해보자 🤔
     
     Q1: 등차수열에서 첫째항이 a이고 공차가 d일 때,
         둘째항은 얼마야?"

학생: "a+d요"

AI: "정확해! 🎉
     
     Q2: 그럼 셋째항은?"

학생: "a+2d요"

AI: "맞아!
     
     Q3: 패턴이 보여? 넷째항은 어떻게 될까?"

학생: "a+3d?"

AI: "완벽해! 👏
     
     Q4: 그럼 n번째 항은 어떻게 표현할 수 있을까?
         힌트: 둘째항 a+d, 셋째항 a+2d, 넷째항 a+3d..."

학생: "a+(n-1)d?"

AI: "정확해! 🎊
     
     바로 그게 등차수열의 일반항 공식이야!
     
     📝 정리:
     등차수열의 일반항: aₙ = a + (n-1)d
     
     - a: 첫째항
     - d: 공차
     - n: 항의 번호
     
     직접 생각해서 찾아냈네! 💪
     이제 왜 이렇게 생겼는지 완전히 이해했지?"
```

### 예시 2: K4 (문제해결) - 전략적 사고

#### Phase 1: 명료화
```
학생: "이 수열 문제 어떻게 풀어요?
      1, 4, 9, 16, 25, ...의 합을 구하는 문제인데"

AI: "문제를 잘 이해했어!
     
     이건 완전제곱수의 합을 구하는 문제구나.
     
     어떤 부분이 어려워?
     1️⃣ 수열이 어떤 규칙인지 모르겠어
     2️⃣ 합 구하는 방법을 모르겠어
     3️⃣ 어디서부터 시작해야 할지 모르겠어"

학생: "3번이요"

→ 질문 확정: "완전제곱수 합 문제의 접근 전략"
   knowledge_code: K4
```

#### Phase 2: 문답과정 선택
```
AI: "문제 푸는 전략을 함께 알아보자! 🎯
     
     어떤 방식으로 도움받고 싶어?
     
     1️⃣ 함께 생각하며 풀기 (강력 추천! 💪)
        - 내가 질문하면서 너를 이끌어줄게
        - 스스로 답을 찾아가는 연습
        - 비슷한 문제도 혼자 풀 수 있게 돼!
     
     2️⃣ 풀이 전략만 알려주기
        - 어떤 단계로 접근하면 되는지만 설명
        - 너가 직접 풀어보기
     
     3️⃣ 전체 풀이 보기
        - 처음부터 끝까지 상세한 풀이
     
     어떤 방식이 좋을까?"

학생: "1번이요"
```

#### Guided Q&A 진행
```
AI: "좋아! 함께 풀어보자 🤔
     
     먼저 문제를 분석해볼까?
     
     Q1: 이 수열 1, 4, 9, 16, 25, ...를
         일반항으로 어떻게 표현할 수 있을까?"

학생: "n²이요?"

AI: "정확해! 🎉
     
     Q2: 그럼 이 문제는 뭘 구하는 거야?
         (힌트: n²의 합)"

학생: "1²+2²+3²+...+n²을 구하는 거요"

AI: "맞아!
     
     Q3: 이걸 구하려면 어떤 공식이 필요할까?
         1) 직접 더하기
         2) 합 공식 찾기
         3) 패턴 찾기
         
         어떤 방법이 좋을 것 같아?"

학생: "2번이요"

AI: "현명한 선택! 😊
     
     Q4: 제곱수의 합 공식은 배운 적 있어?"

학생: "모르겠어요"

AI: "괜찮아! 공식을 알려줄게:
     
     1²+2²+3²+...+n² = n(n+1)(2n+1)/6
     
     Q5: 이제 이 공식을 사용해서 문제를 풀 수 있겠어?"

학생: "네!"

AI: "완벽해! 👏
     
     📝 정리: 문제 해결 과정
     1. 수열의 일반항 파악 (n²)
     2. 필요한 공식 확인 (제곱수 합 공식)
     3. 공식 적용
     
     이런 식으로 접근하면 돼!
     다음엔 혼자서도 할 수 있을 거야 💪"
```

---

## 🎯 프롬프트 반영 사항

### config.yaml 추가 섹션

```yaml
## Phase 2: 문답과정 (Guided Q&A) - K3, K4 전용

### 문답과정 적용 규칙

K1 (즉답형):
  문답과정: 불필요
  전략: 바로 답변 제공
  
K2 (설명형):
  문답과정: 선택적
  전략: 복잡도에 따라 선택지 제공
  
K3 (절차적 지식): ⭐
  문답과정: 강력 권장
  전략: 항상 선택지 제공
  선택지:
    1. 단계별 안내 (Guided Q&A)
    2. 전체 답변 (Full Answer)
    
K4 (메타인지적 지식): ⭐⭐
  문답과정: 필수 권장
  전략: 항상 선택지 제공 + Guided Q&A 추천 강조
  선택지:
    1. 함께 생각하며 풀기 (강력 추천!)
    2. 풀이 전략만 알려주기
    3. 전체 풀이 보기

### 문답과정 선택지 제공 템플릿

K3용 (절차적 지식):
  "[개념/방법]을 알려줄게! 📚
   
   어떻게 배우고 싶어?
   
   1️⃣ 단계별로 차근차근 배우기 (추천! 💡)
      [왜 추천하는지 간단히]
   
   2️⃣ 전체 내용 한번에 보기
      [전체 설명 방식]
   
   어떤 방식이 좋을까? 😊"

K4용 (문제해결):
  "함께 [문제/전략]을 풀어보자! 🎯
   
   어떤 방식으로 도움받고 싶어?
   
   1️⃣ 함께 생각하며 풀기 (강력 추천! 💪)
      - 내가 질문하면서 이끌어줄게
      - 스스로 답을 찾아가는 연습
      - 진짜 실력이 늘어!
   
   2️⃣ 풀이 전략만 알려주기
      - 어떤 순서로 접근하면 되는지
   
   3️⃣ 전체 풀이 보기
      - 처음부터 끝까지 상세 설명
   
   어떤 방식이 좋을까?"

### Guided Q&A 진행 원칙

1. 소크라테스식 질문
   - 직접 답을 주지 않고 질문으로 이끌기
   - 학생 스스로 발견하도록 유도

2. 점진적 난이도
   - 쉬운 질문부터 시작
   - 단계적으로 복잡도 증가

3. 즉각적 피드백
   - 학생 답변마다 피드백
   - 칭찬과 격려 포함

4. 힌트 제공
   - 막히면 힌트 제공
   - "어려우면 힌트 줄까?"

5. 유연한 전환
   - "전체 설명 들을래?" 옵션
   - 학생이 포기하면 요약 제공

6. 최종 정리
   - 함께 배운 내용 정리
   - 성취감 부여
```

---

## 📊 기대 효과

### 교육적 효과

```yaml
메타인지_향상:
  기존: "우연히 배우는 부산물"
  개선: "의도적인 문답 훈련"
  효과: +1.5점 이상 (4.4 → 5.9)

문제해결능력:
  기존: "답만 보고 이해"
  개선: "과정을 함께 생각"
  효과: 전이 능력 향상

학습_지속성:
  기존: "답 받으면 끝"
  개선: "스스로 풀 수 있게 됨"
  효과: 재사용 의향 증가
```

### 사용자 경험

```yaml
선택권_부여:
  - "내가 원하는 방식으로 배울 수 있어"
  - 만족도 향상

시간_효율성:
  - K1, K2: 바로 답변 (빠름)
  - K3, K4: 선택 가능 (유연)
  - 불필요한 과정 강제 X

참여도_증가:
  - 수동적 수신 → 능동적 참여
  - 몰입도 향상
```

---

## ✅ 구현 체크리스트

### Phase 1: 개념 정립
- [x] 명료화 vs 문답과정 구분
- [x] Knowledge Code별 적용 규칙
- [x] 선택지 템플릿 설계

### Phase 2: 프롬프트 반영
- [ ] config.yaml에 문답과정 섹션 추가
- [ ] K3, K4 처리 로직 수정
- [ ] 선택지 제공 템플릿 추가

### Phase 3: 답변 생성기 연동
- [ ] answer_generator에 Guided Q&A 모드 추가
- [ ] 단계별 질문 생성 로직
- [ ] 학생 답변 평가 및 피드백

### Phase 4: 테스트
- [ ] K3 예시로 테스트
- [ ] K4 예시로 테스트
- [ ] 선택지 전환 테스트

---

**이 2단계 시스템은 학생에게 "어떻게 배울지" 선택권을 주면서도, 교육적으로 효과적인 "문답과정"을 권장하는 균형잡힌 접근입니다.**

